<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upscaler de Imágenes con Waifu2x</title>
</head>
<body>
    <h1>Mejorar la resolución de una imagen con Waifu2x</h1>

    <input type="file" id="imageInput" accept="image/*" />
    <br><br>
    <canvas id="outputCanvas"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/waifu2x.js@1.0.0/dist/waifu2x.min.js"></script>
    <script>
        document.getElementById('imageInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        try {
                            // Escalar la imagen usando Waifu2x.js
                            const canvas = document.getElementById('outputCanvas');
                            canvas.width = img.width * 2;  // Escalar por 2
                            canvas.height = img.height * 2;

                            // Aplica el upscaling usando Waifu2x
                            const context = canvas.getContext('2d');
                            waifu2x.upscale(img, { noise: 1, scale: 2 })
                                .then(upscaledCanvas => {
                                    context.drawImage(upscaledCanvas, 0, 0);
                                })
                                .catch(error => {
                                    alert('Error al procesar la imagen: ' + error.message);
                                });
                        } catch (error) {
                            alert('Error al procesar la imagen: ' + error.message);
                        }
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
